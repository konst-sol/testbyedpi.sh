# testbyedpi.sh
Простой скрипт для проверки стратегий программы [ByeDPI](https://github.com/hufrea/byedpi). Скрипт написан на bash и  используется утилиту `curl` для проверок доступности сайтов.

Скрипт последовательно перебирает стратегии и выводит результат.

Стратегии можно передавать либо в файле, либо в командной строке опцией `-a`:
```
  ./testbyedpi.sh strats.txt sites.txt # в файле
  ./testbyedpi.sh -a '-o1 -a1' -a '-o2 -a1' sites.txt # в ком. строке
```
ВНИМАНИЕ! Если используется опция `-a`, то указывать файл стратегий не нужно.

Файл со списком сайтов указывается последним аргументом. Можно указать несколько файлов. Сайты перечисляются по одному на строке без `https://`. Список стратегий и сайтов можно посмотреть в проекте [ByeByeDPI](https://github.com/romanvht/ByeByeDPI/tree/master/app/src/main/assets).

В обоих файлах (стратегий и сайтов) можно использовать комментарии в стиле shell:
* текст от знака `#` до конца строки игнорируется
* пустые строки и строки содержащие только пробелы пропускаются

## Вывод в процессе тестирования
### Без опции `-v`
В процессе тестирования выводится название сайта после которого идет три числа - время обращения к сайту в миллисекундах. Если после числа ничего нет, значит всё прошло успешно - код ответа HTTP 200 и все данные получены. После числа в квадратных скобках может быть:
* `[трёхзначное число]` - код ответа HTTP; эта проверка считается успешной
* `[timeout]` - превышение максимального времени ответа; скорее всего блокировка
* `[error]` - какая-то ошибка; чтобы посмотреть текст ошибки запустите скрипт ещё раз с опцией -v.

После окончания тестирования выводится список стратегий отсортированный по количеству успешных попыток.

### С опцией `-v`
С опцией `-v` выводится полная информация. Если необходим более подробный вывод ByeDPI добавьте в начало стратегии `-x1` или `-x2`.

Чтобы посмотреть полный список опций запустите скрипт с опцией `-h`.
